<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <title>å•†å“è¯¦æƒ… - Splurge Vision</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Montserrat', sans-serif;
      background: linear-gradient(135deg, #C9A9A8 0%, #9BA89C 50%, #B5A69B 100%);
      min-height: 100vh;
      padding: 20px;
      overflow-x: hidden;
    }
    
    /* ===== é¡µé¢å®¹å™¨ ===== */
    .detail-container {
      max-width: 1200px;
      margin: 0 auto;
    }
    
    /* ===== è¿”å›æŒ‰é’® ===== */
    .back-nav {
      margin-bottom: 20px;
      display: flex;
      align-items: center;
    }
    
    .back-btn {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 10px 20px;
      background: rgba(255,255,255,0.9);
      color: #6B7B6D;
      text-decoration: none;
      border-radius: 8px;
      font-weight: 600;
      transition: all 0.2s;
    }
    
    .back-btn:hover {
      background: white;
      transform: translateX(-3px);
    }
    
    /* ===== è¯¦æƒ…ä¸»å®¹å™¨ ===== */
    .detail-content {
      background: white;
      border-radius: 20px;
      padding: 40px;
      box-shadow: 0 8px 30px rgba(0,0,0,0.12);
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 50px;
      overflow: hidden;
    }
    
    /* ===== å·¦ä¾§ï¼šå›¾ç‰‡å±•ç¤ºåŒº ===== */
    .detail-images {
      display: flex;
      flex-direction: column;
      gap: 20px;
      min-width: 0;
      overflow: hidden;
    }
    
    .main-image-container {
      width: 100%;
      height: 500px;
      background: linear-gradient(135deg, #f8f8f8 0%, #f0f0f0 100%);
      border-radius: 16px;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 40px;
      overflow: hidden;
    }
    
    .main-image {
      max-width: 100%;
      max-height: 100%;
      object-fit: contain;
      transition: transform 0.3s;
    }
    
    .main-image:hover {
      transform: scale(1.05);
    }
    
    /* ===== ç¼©ç•¥å›¾ç”»å»Š ===== */
    .thumbnail-gallery {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
      gap: 10px;
      padding: 5px 0;
      max-width: 100%;
    }
    
    .thumbnail {
      width: 100%;
      aspect-ratio: 1;
      background: #f5f5f5;
      border-radius: 12px;
      padding: 8px;
      cursor: pointer;
      border: 3px solid transparent;
      transition: all 0.2s;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
    }
    
    .thumbnail img {
      max-width: 100%;
      max-height: 100%;
      object-fit: contain;
    }
    
    .thumbnail:hover {
      border-color: #9BA89C;
    }
    
    .thumbnail.active {
      border-color: #6B7B6D;
      background: #f0f0f0;
    }
    
    /* ===== å³ä¾§ï¼šå•†å“ä¿¡æ¯åŒº ===== */
    .detail-info {
      display: flex;
      flex-direction: column;
      gap: 25px;
    }
    
    .detail-name {
      font-size: 2rem;
      font-weight: 700;
      color: #888;
      line-height: 1.3;
    }
    
    .detail-desc {
      font-size: 1.05rem;
      color: #999;
      line-height: 1.7;
    }
    
    .detail-price {
      font-size: 2.5rem;
      font-weight: 700;
      color: #888;
    }
    
    /* ===== é¢œè‰²é€‰æ‹©åŒº ===== */
    .color-selector {
      padding-top: 20px;
      border-top: 2px solid #f0f0f0;
    }
    
    .color-label {
      font-size: 1.1rem;
      font-weight: 600;
      color: #333;
      margin-bottom: 15px;
      display: block;
    }
    
    .color-options {
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
    }
    
    .color-option {
      padding: 12px 24px;
      border: 2px solid #e0e0e0;
      border-radius: 10px;
      background: white;
      cursor: pointer;
      transition: all 0.2s;
      font-weight: 600;
      color: #555;
    }
    
    .color-option:hover {
      border-color: #9BA89C;
      background: rgba(155, 168, 156, 0.05);
    }
    
    .color-option.active {
      border-color: #6B7B6D;
      background: linear-gradient(135deg, rgba(155, 168, 156, 0.15) 0%, rgba(107, 123, 109, 0.1) 100%);
      color: #6B7B6D;
    }
    
    /* ===== è§„æ ¼ä¿¡æ¯ ===== */
    .specs-section {
      padding: 20px;
      background: #f9f9f9;
      border-radius: 12px;
    }
    
    .specs-title {
      font-size: 1.1rem;
      font-weight: 700;
      color: #333;
      margin-bottom: 15px;
    }
    
    .spec-item {
      display: flex;
      justify-content: space-between;
      padding: 10px 0;
      border-bottom: 1px solid #e0e0e0;
    }
    
    .spec-item:last-child {
      border-bottom: none;
    }
    
    .spec-label {
      color: #888;
      font-weight: 600;
    }
    
    .spec-value {
      color: #333;
      font-weight: 600;
    }
    
    /* ===== æ“ä½œæŒ‰é’®åŒº ===== */
    .action-buttons {
      display: flex;
      gap: 15px;
      padding-top: 20px;
    }
    
    .action-btn {
      flex: 1;
      padding: 18px;
      border: none;
      border-radius: 12px;
      font-size: 1.1rem;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.2s;
    }
    
    .btn-buy-now {
      background: linear-gradient(135deg, #9BA89C 0%, #8B9A8C 100%);
      color: white;
    }
    
    .btn-buy-now:hover {
      background: linear-gradient(135deg, #8B9A8C 0%, #7A8A7C 100%);
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(107, 123, 109, 0.3);
    }
    
    .btn-add-cart {
      background: white;
      color: #9BA89C;
      border: 2px solid #9BA89C;
    }
    
    .btn-add-cart:hover {
      background: rgba(155, 168, 156, 0.1);
      transform: translateY(-2px);
    }
    
    /* ===== å“åº”å¼è®¾è®¡ ===== */
    @media (max-width: 968px) {
      .detail-content {
        grid-template-columns: 1fr;
        gap: 30px;
        padding: 30px;
      }
      
      .main-image-container {
        height: 400px;
      }
    }
    
    /* æ‰‹æœº */
    @media (max-width: 768px) {
      body {
        padding: 10px;
      }
      .detail-content {
        padding: 20px;
        gap: 20px;
        border-radius: 16px;
      }
      .back-btn {
        padding: 8px 16px;
        font-size: 0.9rem;
      }
      .main-image-container {
        height: 300px;
        padding: 20px;
      }
      .thumbnail-gallery {
        grid-template-columns: repeat(auto-fill, minmax(60px, 1fr));
        gap: 8px;
      }
      .thumbnail {
        padding: 6px;
      }
      .detail-name {
        font-size: 1.5rem;
      }
      .detail-desc {
        font-size: 0.95rem;
      }
      .detail-price {
        font-size: 2rem;
      }
      .color-option {
        padding: 10px 16px;
        font-size: 0.9rem;
      }
      .specs-section {
        padding: 15px;
      }
      .spec-item {
        padding: 8px 0;
        font-size: 0.9rem;
      }
      .action-buttons {
        flex-direction: column;
        gap: 10px;
      }
      .action-btn {
        padding: 14px;
        font-size: 1rem;
      }
    }
    
    /* å°å±æ‰‹æœº */
    @media (max-width: 480px) {
      .main-image-container {
        height: 250px;
        padding: 15px;
      }
      .thumbnail-gallery {
        grid-template-columns: repeat(auto-fill, minmax(50px, 1fr));
        gap: 6px;
      }
      .thumbnail {
        padding: 5px;
      }
      .detail-name {
        font-size: 1.3rem;
      }
      .detail-price {
        font-size: 1.6rem;
      }
      .detail-info {
        gap: 18px;
      }
    }

    /* ===== å®šåˆ¶æ¬¾è¯´æ˜ ===== */
    .custom-info-box {
      background: linear-gradient(135deg, rgba(155, 168, 156, 0.1), rgba(107, 123, 109, 0.05));
      border: 1px solid rgba(155, 168, 156, 0.3);
      border-radius: 12px;
      padding: 20px;
      margin-top: 15px;
      animation: fadeIn 0.3s ease;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(-10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .custom-info-box p {
      font-weight: 700;
      color: #6B7B6D;
      margin-bottom: 10px;
      font-size: 1rem;
    }
    .custom-info-box ul {
      list-style: none;
      padding: 0;
      margin: 0;
    }
    .custom-info-box ul li {
      padding: 4px 0;
      color: #666;
      font-size: 0.9rem;
    }
    .custom-info-box ul li::before {
      content: "âœ“ ";
      color: #9BA89C;
      font-weight: 700;
    }
    .price-note {
      font-size: 0.85rem;
      color: #888;
      margin-top: 5px;
      font-weight: 400;
    }

    /* ===== è”ç³»å®¢æœæµ®åŠ¨æŒ‰é’® ===== */
    .cs-float-btn {
      position: fixed;
      right: 24px;
      bottom: 30px;
      width: 56px;
      height: 56px;
      border-radius: 50%;
      background: linear-gradient(135deg, #9BA89C 0%, #6B7B6D 100%);
      color: white;
      border: none;
      cursor: pointer;
      box-shadow: 0 4px 16px rgba(107,123,109,0.4);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      z-index: 999;
      transition: all 0.3s;
    }
    .cs-float-btn:hover {
      transform: scale(1.1);
      box-shadow: 0 6px 24px rgba(107,123,109,0.5);
    }
    .cs-float-btn .cs-badge {
      position: absolute;
      top: -2px;
      right: -2px;
      background: #C9A9A8;
      color: white;
      font-size: 0.6rem;
      padding: 2px 5px;
      border-radius: 10px;
      font-weight: 700;
    }

    /* å®¢æœå¼¹çª— */
    .cs-popup {
      display: none;
      position: fixed;
      right: 24px;
      bottom: 100px;
      width: 340px;
      background: rgba(255,255,255,0.97);
      border-radius: 20px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.18);
      z-index: 1000;
      overflow: hidden;
      animation: csSlideUp 0.3s ease;
    }
    .cs-popup.show {
      display: block;
    }
    @keyframes csSlideUp {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .cs-popup-header {
      background: linear-gradient(135deg, #9BA89C 0%, #6B7B6D 100%);
      color: white;
      padding: 18px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .cs-popup-header h3 {
      font-size: 1.05rem;
      font-weight: 700;
    }
    .cs-popup-close {
      background: none;
      border: none;
      color: white;
      font-size: 1.4rem;
      cursor: pointer;
      opacity: 0.8;
      transition: opacity 0.2s;
    }
    .cs-popup-close:hover {
      opacity: 1;
    }
    .cs-popup-body {
      padding: 20px;
    }
    .cs-status {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 16px;
      font-size: 0.85rem;
      color: #6B7B6D;
    }
    .cs-status-dot {
      width: 8px;
      height: 8px;
      background: #7BC67E;
      border-radius: 50%;
      box-shadow: 0 0 6px 2px rgba(123,198,126,0.4);
    }
    .cs-contact-item {
      display: flex;
      align-items: center;
      gap: 14px;
      padding: 14px 16px;
      background: rgba(155,168,156,0.06);
      border-radius: 12px;
      margin-bottom: 10px;
      transition: all 0.2s;
      cursor: pointer;
      text-decoration: none;
      color: inherit;
    }
    .cs-contact-item:hover {
      background: rgba(155,168,156,0.14);
      transform: translateX(4px);
    }
    .cs-contact-icon {
      width: 40px;
      height: 40px;
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.1rem;
      flex-shrink: 0;
    }
    .cs-contact-info {
      flex: 1;
    }
    .cs-contact-info .cs-label {
      font-size: 0.82rem;
      color: #8B9B8D;
      margin-bottom: 2px;
    }
    .cs-contact-info .cs-value {
      font-size: 0.95rem;
      color: #6B7B6D;
      font-weight: 600;
    }
    .cs-contact-arrow {
      color: #BCC8BD;
      font-size: 0.9rem;
    }
    .cs-hours {
      text-align: center;
      font-size: 0.78rem;
      color: #A8B5A0;
      margin-top: 14px;
      padding-top: 14px;
      border-top: 1px solid rgba(107,123,109,0.1);
    }

    @media (max-width: 480px) {
      .cs-float-btn {
        right: 16px;
        bottom: 20px;
        width: 50px;
        height: 50px;
        font-size: 1.3rem;
      }
      .cs-popup {
        right: 10px;
        bottom: 80px;
        width: calc(100vw - 20px);
        max-width: 340px;
      }
    }
  </style>
</head>
<body>
  <div class="detail-container">
    <!-- è¿”å›æŒ‰é’® -->
    <nav class="back-nav">
      <a href="products.html" class="back-btn">
        â† è¿”å›å•†å“åˆ—è¡¨
      </a>
      <a href="cart.html" class="back-btn" style="margin-left: auto;">
        ğŸ›’ è´­ç‰©è½¦
      </a>
    </nav>
    
    <!-- è¯¦æƒ…å†…å®¹ -->
    <div class="detail-content">
      <!-- å·¦ä¾§ï¼šå›¾ç‰‡å±•ç¤º -->
      <div class="detail-images">
        <div class="main-image-container">
          <img id="mainImage" src="" alt="" class="main-image">
        </div>
        
        <div class="thumbnail-gallery" id="thumbnailGallery">
          <!-- ç¼©ç•¥å›¾ç”± JavaScript ç”Ÿæˆ -->
        </div>
      </div>
      
      <!-- å³ä¾§ï¼šå•†å“ä¿¡æ¯ -->
      <div class="detail-info">
        <h1 class="detail-name" id="productName">å•†å“åç§°</h1>
        <p class="detail-desc" id="productDesc">å•†å“æè¿°</p>
        <div class="detail-price" id="productPrice">Â¥899</div>
        
        <!-- é¢œè‰²é€‰æ‹© -->
        <div class="color-selector">
          <label class="color-label">é€‰æ‹©æ¬¾å¼</label>
          <div class="color-options" id="colorOptions">
            <!-- é¢œè‰²é€‰é¡¹ç”± JavaScript ç”Ÿæˆ -->
          </div>
          <!-- å®šåˆ¶æ¬¾è¯´æ˜ï¼ˆé»˜è®¤éšè—ï¼‰ -->
          <div id="customInfo" style="display:none;">
            <div class="custom-info-box">
              <p>ğŸ”¬ å®šåˆ¶æ¬¾é‡‡ç”¨å¾·å›½è”¡å¸è§†ç‰¹è€é•œç‰‡</p>
              <ul>
                <li>éçƒé¢ / é˜²è“å…‰é•œç‰‡å¯é€‰</li>
                <li>æ”¯æŒè¿‘è§†ã€æ•£å…‰åº¦æ•°ç²¾å‡†é…åˆ¶</li>
                <li>1.56 / 1.61 / 1.67 æŠ˜å°„ç‡å¯é€‰</li>
                <li>ä¸“ä¸šéªŒå…‰å¸ˆ 24 å°æ—¶å†…ç¡®è®¤</li>
              </ul>
            </div>
          </div>
        </div>
        
        <!-- è§„æ ¼ä¿¡æ¯ -->
        <div class="specs-section">
          <h3 class="specs-title">äº§å“è§„æ ¼</h3>
          <div class="spec-item">
            <span class="spec-label">æè´¨</span>
            <span class="spec-value">ä¼˜è´¨é†‹é…¸çº¤ç»´</span>
          </div>
          <div class="spec-item">
            <span class="spec-label">é•œæ¡†å®½åº¦</span>
            <span class="spec-value">140mm</span>
          </div>
          <div class="spec-item">
            <span class="spec-label">é•œè…¿é•¿åº¦</span>
            <span class="spec-value">145mm</span>
          </div>
          <div class="spec-item">
            <span class="spec-label">é¼»æ¢å®½åº¦</span>
            <span class="spec-value">18mm</span>
          </div>
        </div>
        
        <!-- æ“ä½œæŒ‰é’® -->
        <div class="action-buttons">
          <button class="action-btn btn-buy-now" onclick="buyNow()">ç«‹å³è´­ä¹°</button>
          <button class="action-btn btn-add-cart" onclick="addToCart()">åŠ å…¥è´­ç‰©è½¦</button>
        </div>
      </div>
    </div>
  </div>

  <!-- è”ç³»å®¢æœæµ®åŠ¨æŒ‰é’® -->
  <button class="cs-float-btn" onclick="toggleCSPopup()" title="è”ç³»å®¢æœ">
    ğŸ’¬
    <span class="cs-badge">åœ¨çº¿</span>
  </button>

  <!-- å®¢æœå¼¹çª— -->
  <div class="cs-popup" id="csPopup">
    <div class="cs-popup-header">
      <h3>è”ç³»å®¢æœ</h3>
      <button class="cs-popup-close" onclick="toggleCSPopup()">&times;</button>
    </div>
    <div class="cs-popup-body">
      <div class="cs-status">
        <span class="cs-status-dot"></span>
        å®¢æœåœ¨çº¿ä¸­ï¼Œéšæ—¶ä¸ºæ‚¨æœåŠ¡
      </div>

      <a href="tel:+447549875477" class="cs-contact-item">
        <div class="cs-contact-icon" style="background:rgba(155,168,156,0.15);">ğŸ“</div>
        <div class="cs-contact-info">
          <div class="cs-label">ç”µè¯å’¨è¯¢</div>
          <div class="cs-value">+44 7549 875477</div>
        </div>
        <span class="cs-contact-arrow">â€º</span>
      </a>

      <a href="mailto:SplurgeVision@163.com" class="cs-contact-item">
        <div class="cs-contact-icon" style="background:rgba(201,169,168,0.15);">âœ‰ï¸</div>
        <div class="cs-contact-info">
          <div class="cs-label">é‚®ä»¶è”ç³»</div>
          <div class="cs-value">SplurgeVision@163.com</div>
        </div>
        <span class="cs-contact-arrow">â€º</span>
      </a>

      <div class="cs-contact-item" onclick="alert('è¯·åœ¨å°çº¢ä¹¦æœç´¢â€œSplurge Visionçœ¼é•œåº—â€è”ç³»æˆ‘ä»¬')">
        <div class="cs-contact-icon" style="background:rgba(212,201,168,0.2);">
          <span style="display:inline-block;width:10px;height:10px;background:#D4C9A8;border-radius:50%;box-shadow:0 0 5px 2px rgba(212,201,168,0.4);"></span>
        </div>
        <div class="cs-contact-info">
          <div class="cs-label">å°çº¢ä¹¦ç§ä¿¡</div>
          <div class="cs-value">Splurge Visionçœ¼é•œåº—</div>
        </div>
        <span class="cs-contact-arrow">â€º</span>
      </div>

      <a href="https://instagram.com/" target="_blank" class="cs-contact-item">
        <div class="cs-contact-icon" style="background:rgba(201,169,168,0.12);">ğŸ“·</div>
        <div class="cs-contact-info">
          <div class="cs-label">Instagram ç§ä¿¡</div>
          <div class="cs-value">Splurge Vision</div>
        </div>
        <span class="cs-contact-arrow">â€º</span>
      </a>

      <div class="cs-hours">
        å·¥ä½œæ—¶é—´ï¼šå‘¨ä¸€è‡³å‘¨å…­ 9:00-18:00ï¼ˆè‹±å›½æ—¶é—´ï¼‰<br>
        é‚®ä»¶å’Œå°çº¢ä¹¦ 24å°æ—¶å†…å›å¤
      </div>
    </div>
  </div>
  
  <script>
    // ===== å•†å“æ•°æ®ï¼ˆä¸åˆ—è¡¨é¡µä¿æŒä¸€è‡´çš„æ•°æ®ç»“æ„ï¼‰=====
    const productsData = {
      "sv-product-a": {
        name: "SPLURGE VISION NO.1",
        desc: "ä¸€ä»¶ç”¨äºæ—¥å¸¸ä½©æˆ´çš„ç‰©ä»¶ æ›´æ¥è¿‘ä¸€ä»¶è¢«é•¿æœŸä¿ç•™çš„ä½œå“",
        price: 258,
        defaultVariant: "default",
        variants: [
          {
            color: "default",
            label: "æ ‡å‡†æ¬¾",
            images: ["1å·b.jpg", "1å·.jpg", "1å·c.jpg", "1å·d.jpg", "1å·a.jpg", "1å·e.jpg", "1å·f.jpg", "1å·g.jpg", "1å·h.jpg", "1å·i.jpg", "1å·j.jpg", "1å·k.jpg", "1å·l.jpg"]
          }
        ]
      },
      "sv-product-b": {
        name: "SPLURGE VISION NO.2",
        desc: "ä¸æ‰“æ–­è§†çº¿ ä¹Ÿä¸æ‰“æ–­ä½ æ­£åœ¨åšçš„äº‹æƒ…",
        price: 328,
        defaultVariant: "default",
        variants: [
          {
            color: "default",
            label: "æ ‡å‡†æ¬¾",
            images: ["2å·b.jpg", "2å·.jpg", "2å·a.jpg", "2å·c.jpg", "2å·d.jpg", "2å·e.jpg", "2å·f.jpg", "2å·g.jpg", "2å·h.jpg", "2å·i.jpg", "2å·j.jpg", "2å·k.jpg", "2å·l.jpg"]
          }
        ]
      },
      "sv-product-c": {
        name: "SPLURGE VISION NO.3",
        desc: "é æ¯”ä¾‹æˆç«‹ è€Œä¸æ˜¯é é£æ ¼å–èƒœ",
        price: 219,
        defaultVariant: "default",
        variants: [
          {
            color: "default",
            label: "æ ‡å‡†æ¬¾",
            images: ["3å·b.jpg", "3å·.jpg", "3å·a.jpg", "3å·c.jpg", "3å·e.jpg", "3å·f.jpg", "3å·g.jpg", "3å·d.jpg", "3å·h.jpg", "3å·i.jpg", "3å·j.jpg", "3å·k.jpg", "3å·l.jpg", "3å·m.jpg"]
          }
        ]
      },
      "sv-product-d": {
        name: "SPLURGE VISION NO.4",
        desc: "ä¸è¿½æ±‚å¥½çœ‹ åªè¿½æ±‚è¢«é•¿æœŸä½¿ç”¨",
        price: 219,
        defaultVariant: "default",
        variants: [
          {
            color: "default",
            label: "æ ‡å‡†æ¬¾",
            images: ["4å·.jpg", "4å·a.jpg", "4å·b.jpg", "4å·c.jpg", "4å·d.jpg", "4å·e.jpg"]
          }
        ]
      },
      "sv-product-e": {
        name: "SPLURGE VISION NO.5",
        desc: "ä¸ºè¿‘è·ç¦»ç”Ÿæ´»å‡†å¤‡ é€‚åˆä¹¦é¡µä¸ç¯å…‰ä¹‹é—´",
        price: 489,
        defaultVariant: "default",
        variants: [
          {
            color: "default",
            label: "æ ‡å‡†æ¬¾",
            images: ["5å·b.jpg", "5å·.jpg", "5å·a.jpg", "5å·c.jpg", "5å·d.jpg", "5å·e.jpg", "5å·f.jpg", "5å·g.jpg", "5å·h.jpg", "5å·i.jpg", "5å·j.jpg", "5å·k.jpg", "5å·l.jpg", "5å·m.jpg", "5å·n.jpg", "5å·o.jpg", "5å·p.jpg"]
          }
        ]
      },
      "sv-product-f": {
        name: "SPLURGE VISION NO.6",
        desc: "åœ¨å­˜åœ¨æ„Ÿä¸æ¶ˆå¤±ä¹‹é—´ æ‰¾åˆ°ä¸€ä¸ªåˆšå¥½çš„ä½ç½®",
        price: 249,
        defaultVariant: "default",
        variants: [
          {
            color: "default",
            label: "æ ‡å‡†æ¬¾",
            images: ["6å·b.jpg", "6å·.jpg", "6å·cc.jpg", "8å·.jpg", "6å·a.jpg", "6å·c.jpg", "6å·d.jpg", "6å·e.jpg", "6å·f.jpg", "6å·g.jpg", "6å·h.jpg", "6å·i.jpg", "6å·j.jpg", "6å·k.jpg", "6å·l.jpg", "6å·m.jpg"]
          }
        ]
      },
      "sv-product-g": {
        name: "SPLURGE VISION NO.7",
        desc: "ä¸æ˜¯ä¸ºå±•ç¤ºè®¾è®¡ è€Œæ˜¯ä¸ºé™ªä¼´å­˜åœ¨",
        price: 358,
        defaultVariant: "default",
        variants: [
          {
            color: "default",
            label: "æ ‡å‡†æ¬¾",
            images: ["7å·b.jpg", "7å·.jpg", "7å·c.jpg", "7å·ccc.jpg", "7å·d.jpg", "7å·e.jpg", "7å·f.jpg", "7å·a.jpg", "7å·g.jpg", "7å·h.jpg", "7å·i.jpg", "7å·j.jpg", "7å·k.jpg", "7å·l.jpg", "7å·m.jpg", "7å·n.jpg", "7å·o.jpg", "7å·p.jpg"]
          }
        ]
      },
      "sv-product-h": {
        name: "SPLURGE VISION NO.8",
        desc: "æŠŠå…‹åˆ¶åšåˆ°æè‡´ è®©èˆ’é€‚æˆä¸ºä¹ æƒ¯",
        price: 329,
        defaultVariant: "default",
        variants: [
          {
            color: "default",
            label: "æ ‡å‡†æ¬¾",
            images: ["8å·b.jpg", "8å·a.jpg", "8å·c.jpg", "8å·d.jpg", "8å·e.jpg", "8å·f.jpg", "8å·g.jpg", "8å·h.jpg", "8å·i.jpg", "8å·j.jpg", "8å·k.jpg", "8å·l.jpg", "8å·m5.jpg"]
          }
        ]
      },
      "sv-product-i": {
        name: "SPLURGE VISION NO.9",
        desc: "ä¸éœ€è¦ç¬¬äºŒçœ¼ç¡®è®¤ ç¬¬ä¸€çœ¼å°±çŸ¥é“å¯¹äº†",
        price: 399,
        defaultVariant: "gold",
        variants: [
          {
            color: "gold",
            label: "æµå…‰å¥¢é‡‘",
            images: ["9å·ab.jpg", "9å·a.jpg", "9å·ac.jpg", "9å·ad.jpg", "9å·ae.jpg", "9å·af.jpg", "9å·c.jpg", "9å·d.jpg", "9å·e.jpg", "9å·f.jpg", "9å·g.jpg", "9å·h.jpg", "9å·i.jpg", "9å·j.jpg", "9å·k.jpg", "9å·l.jpg", "9å·m.jpg", "9å·n.jpg", "9å·o.jpg", "9å·p.jpg", "9å·q.jpg"]
          },
          {
            color: "pink-gold",
            label: "æš®å…‰ç²‰é‡‘",
            images: ["9å·b.jpg", "9å·bb.jpg", "9å·bc.jpg", "9å·bd.jpg", "9å·be.jpg", "9å·bf.jpg", "9å·c.jpg", "9å·d.jpg", "9å·e.jpg", "9å·f.jpg", "9å·g.jpg", "9å·h.jpg", "9å·i.jpg", "9å·j.jpg", "9å·k.jpg", "9å·l.jpg", "9å·m.jpg", "9å·n.jpg", "9å·o.jpg", "9å·p.jpg", "9å·q.jpg"]
          }
        ]
      },
      "sv-product-j": {
        name: "SPLURGE VISION NO.10",
        desc: "æ—¶é—´ä¼šæ›¿ä½ é€‰æ‹© è€Œå®ƒä»ä¸å‡ºé”™",
        price: 328,
        defaultVariant: "gold",
        variants: [
          {
            color: "gold",
            label: "æµå…‰å¥¢é‡‘",
            images: ["10å·ab.jpg", "10å·a.jpg", "10å·ac.jpg", "10å·ad.jpg", "10å·ae.jpg", "10å·af.jpg", "10å·c.jpg", "10å·d.jpg", "10å·e.jpg", "10å·f.jpg", "10å·g.jpg", "10å·h.jpg", "10å·i.jpg", "10å·j.jpg", "10å·k.jpg", "10å·l.jpg", "10å·m.jpg"]
          },
          {
            color: "silver",
            label: "æ˜ŸèŠ’é“‚é“¶",
            images: ["10å·b.jpg", "10å·bb.jpg", "10å·bc.jpg", "10å·bd.jpg", "10å·be.jpg", "10å·c.jpg", "10å·d.jpg", "10å·e.jpg", "10å·f.jpg", "10å·g.jpg", "10å·h.jpg", "10å·i.jpg", "10å·j.jpg", "10å·k.jpg", "10å·l.jpg", "10å·m.jpg"]
          }
        ]
      }
    };

    // ===== è‡ªåŠ¨ä¸ºæ¯ä¸ªå•†å“ç”Ÿæˆ"å®šåˆ¶æ¬¾"variant =====
    Object.values(productsData).forEach(product => {
      const standardVariant = product.variants[0];
      product.variants.push({
        color: "custom",
        label: "å®šåˆ¶æ¬¾",
        images: [...standardVariant.images]
      });
    });
    
    // ===== å½“å‰å•†å“ä¿¡æ¯ =====
    let currentProduct = null;
    let currentVariantIndex = 0;
    let currentImageIndex = 0;
    
    // ===== åˆå§‹åŒ–é¡µé¢ =====
    function initPage() {
      const urlParams = new URLSearchParams(window.location.search);
      const productId = urlParams.get('id') || 'sv-product-a';
      
      currentProduct = productsData[productId];
      
      if (!currentProduct) {
        alert('å•†å“ä¸å­˜åœ¨');
        window.location.href = 'products.html';
        return;
      }
      
      // æ¸²æŸ“å•†å“åŸºæœ¬ä¿¡æ¯
      document.getElementById('productName').textContent = currentProduct.name;
      document.getElementById('productDesc').textContent = currentProduct.desc;
      document.getElementById('productPrice').textContent = `Â¥${currentProduct.price}`;
      
      // æŸ¥æ‰¾é»˜è®¤ variant çš„ç´¢å¼•
      const defaultIndex = currentProduct.variants.findIndex(v => v.color === currentProduct.defaultVariant);
      currentVariantIndex = defaultIndex >= 0 ? defaultIndex : 0;
      
      // åŠ¨æ€è®¾ç½®æ ‡ç­¾ï¼šæœ‰é¢œè‰²å˜ä½“æ—¶æ˜¾ç¤º"é€‰æ‹©é¢œè‰²"ï¼Œå¦åˆ™æ˜¾ç¤º"é€‰æ‹©æ¬¾å¼"
      const hasColorVariants = currentProduct.variants.filter(v => v.color !== 'custom' && v.color !== 'default').length > 1;
      document.querySelector('.color-label').textContent = hasColorVariants ? 'é€‰æ‹©é¢œè‰²' : 'é€‰æ‹©æ¬¾å¼';
      
      // æ¸²æŸ“é¢œè‰²é€‰é¡¹
      renderVariants();
      
      // é€‰æ‹©é»˜è®¤æ¬¾å¼ï¼ˆè§¦å‘å›¾ç‰‡æ¸²æŸ“å’ŒUIæ›´æ–°ï¼‰
      selectVariant(currentVariantIndex);
    }
    
    // ===== æ¸²æŸ“ variant é€‰é¡¹ =====
    function renderVariants() {
      const colorContainer = document.getElementById('colorOptions');
      colorContainer.innerHTML = '';
      
      currentProduct.variants.forEach((variant, index) => {
        const option = document.createElement('div');
        option.className = `color-option ${index === currentVariantIndex ? 'active' : ''}`;
        option.textContent = variant.label;
        option.onclick = () => selectVariant(index);
        colorContainer.appendChild(option);
      });
    }
    
    // ===== é€‰æ‹© variant =====
    function selectVariant(variantIndex) {
      currentVariantIndex = variantIndex;
      const variant = currentProduct.variants[variantIndex];
      
      // æ›´æ–°é€‰é¡¹é«˜äº®
      const options = document.querySelectorAll('.color-option');
      options.forEach((opt, i) => {
        opt.classList.toggle('active', i === variantIndex);
      });
      
      // å¤„ç†å®šåˆ¶æ¬¾/æ ‡å‡†æ¬¾ UI åˆ‡æ¢
      const customInfo = document.getElementById('customInfo');
      const buyBtn = document.querySelector('.btn-buy-now');
      const cartBtn = document.querySelector('.btn-add-cart');
      
      if (variant.color === 'custom') {
        customInfo.style.display = 'block';
        document.getElementById('productPrice').innerHTML =
          `Â¥${currentProduct.price}<div class="price-note">é•œæ¡†ä»·æ ¼ï¼Œè”¡å¸è§†ç‰¹è€é•œç‰‡ Â¥150 èµ·</div>`;
        buyBtn.textContent = 'ğŸ”¬ å‰å¾€å®šåˆ¶é•œç‰‡';
        cartBtn.style.display = 'none';
      } else {
        customInfo.style.display = 'none';
        document.getElementById('productPrice').textContent = `Â¥${currentProduct.price}`;
        buyBtn.textContent = 'ç«‹å³è´­ä¹°';
        cartBtn.style.display = '';
      }
      
      // æ¸²æŸ“è¯¥ variant çš„æ‰€æœ‰å›¾ç‰‡
      renderImagesForVariant(variantIndex);
    }
    
    // ===== æ¸²æŸ“æŒ‡å®š variant çš„æ‰€æœ‰å›¾ç‰‡ =====
    function renderImagesForVariant(variantIndex) {
      const variant = currentProduct.variants[variantIndex];
      const images = variant.images;
      
      // æ›´æ–°ä¸»å›¾
      updateMainImage(images[0]);
      
      // æ¸²æŸ“ç¼©ç•¥å›¾
      renderThumbnails(images);
    }
    
    // ===== æ›´æ–°ä¸»å›¾ =====
    function updateMainImage(imageSrc) {
      const mainImg = document.getElementById('mainImage');
      mainImg.src = imageSrc;
      mainImg.alt = currentProduct.name;
    }
    
    // ===== æ¸²æŸ“ç¼©ç•¥å›¾ =====
    function renderThumbnails(images) {
      const gallery = document.getElementById('thumbnailGallery');
      gallery.innerHTML = '';
      
      images.forEach((img, index) => {
        const thumb = document.createElement('div');
        thumb.className = `thumbnail ${index === 0 ? 'active' : ''}`;
        thumb.onclick = () => selectThumbnail(img, index);
        thumb.innerHTML = `<img src="${img}" alt="è§†å›¾ ${index + 1}" loading="lazy">`;
        gallery.appendChild(thumb);
      });
    }
    
    // ===== é€‰æ‹©ç¼©ç•¥å›¾ =====
    function selectThumbnail(imageSrc, index) {
      updateMainImage(imageSrc);
      currentImageIndex = index;
      
      // æ›´æ–°ç¼©ç•¥å›¾é«˜äº®
      const thumbnails = document.querySelectorAll('.thumbnail');
      thumbnails.forEach((thumb, i) => {
        thumb.classList.toggle('active', i === index);
      });
    }
    
    // ===== ç«‹å³è´­ä¹° =====
    function buyNow() {
      const variant = currentProduct.variants[currentVariantIndex];
      if (variant.color === 'custom') {
        // å®šåˆ¶æ¬¾ â†’ è·³è½¬åˆ°é•œç‰‡å®šåˆ¶é¡µé¢
        const urlParams = new URLSearchParams(window.location.search);
        const productId = urlParams.get('id') || 'sv-product-a';
        window.location.href = `customize.html?id=${productId}`;
        return;
      }
      alert(`æ­£åœ¨è´­ä¹° ${currentProduct.name}\nä»·æ ¼ï¼šÂ¥${currentProduct.price}`);
      // è¿™é‡Œå¯ä»¥è·³è½¬åˆ°ç»“è´¦é¡µé¢
    }
    
    // ===== åŠ å…¥è´­ç‰©è½¦ =====
    function addToCart() {
      const cart = JSON.parse(localStorage.getItem('splurgeVisionCart') || '[]');
      const existing = cart.find(item => item.id === currentProduct.id);
      if (existing) {
        existing.qty += 1;
      } else {
        const defaultVariant = currentProduct.variants.find(v => v.color === currentProduct.defaultVariant) || currentProduct.variants[0];
        cart.push({
          id: currentProduct.id,
          name: currentProduct.name,
          desc: currentProduct.desc.replace(/<br>/g, ' '),
          price: currentProduct.price,
          image: defaultVariant.images[0],
          qty: 1
        });
      }
      localStorage.setItem('splurgeVisionCart', JSON.stringify(cart));
      alert(`âœ“ å·²å°† ${currentProduct.name} åŠ å…¥è´­ç‰©è½¦`);
    }
    
    // ===== é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ– =====
    initPage();
    // ===== è”ç³»å®¢æœå¼¹çª— =====
    function toggleCSPopup() {
      const popup = document.getElementById('csPopup');
      popup.classList.toggle('show');
    }

    // ç‚¹å‡»å¼¹çª—å¤–éƒ¨å…³é—­
    document.addEventListener('click', function(e) {
      const popup = document.getElementById('csPopup');
      const btn = document.querySelector('.cs-float-btn');
      if (popup.classList.contains('show') && !popup.contains(e.target) && !btn.contains(e.target)) {
        popup.classList.remove('show');
      }
    });
  </script>
</body>
</html>
